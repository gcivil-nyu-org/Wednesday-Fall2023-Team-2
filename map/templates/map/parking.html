{% extends "parkrowd/main.html" %} {% block content %}
<div id="map" style="height: 400px; width: 100%"></div>
<script>
  let map;
  function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
      center: { lat: 40.69446042799896, lng: -73.9864403526369 },
      zoom: 18,
    });

    var locations = JSON.parse("{{locations|escapejs}}");

    console.log(locations);

    locations.forEach(function (location) {
      var marker = new google.maps.Marker({
        position: {
          lat: parseFloat(location.lat),
          lng: parseFloat(location.lon),
        },
        map: map,
        title: location.name,
      });
    });
    /*let marker = new google.maps.Marker({
            position: {lat: 40.69446042799896, lng: -73.9864403526369},
            map: map,
            title: "Tandon School of Engineering"
        });
        const infoWindow = new google.maps.InfoWindow({
            content: '<div><strong>NYUs Engineering School</strong><br>Yes. The spot is in the building.</div>'
        });

        marker.addListener('click', function() {
            infoWindow.open(map, marker);
        });*/
  }
</script>
<script
  async
  defer
  src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_MAPS_API_KEY }}&callback=initMap"
></script>
{% endblock %}
